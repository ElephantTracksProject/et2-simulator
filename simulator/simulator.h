#ifndef ET2_SIMULATOR_SIMULATOR_SIMULATOR_H_
#define ET2_SIMULATOR_SIMULATOR_SIMULATOR_H_

#include <iostream>
#include <fstream>
#include "simulator/cctree.h"

// Heap simulator from traces generated by Elephant Tracks
//
// Event traces:
// * A: Object allocation
// * U: Object update
// * M: Method entry
// * E: Method exit
// * W: Object witness
//
namespace et_simulator {
class Simulator
{
 private:
  CCTree * tree;

  std::string tracefile;
  std::string namesfile;

  void read_name_file(std::ifstream & name_file);
  void read_trace_file(std::ifstream & in);

 public:
  Simulator(std::string tf, std::string nf) :
  tracefile(tf),
  namesfile(nf) {
    tree = new CCTree();
  }

  void simulate();
  void report();
};
}  //  namespace et_simulator
#endif  //  ET2_SIMULATOR_SIMULATOR_SIMULATOR_H_
